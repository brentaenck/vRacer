<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>vRacer - Vector Racing Game</title>
    <meta name="description" content="Professional vector racing game with multi-player support, realistic physics, and competitive gameplay" />
    <meta name="theme-color" content="#00d4ff" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ctext y='.9em' font-size='90'%3eğŸ%3c/text%3e%3c/svg%3e" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <div id="app">
      <header role="banner">
        <div class="header-brand">
          <h1>
            ğŸ vRacer
            <span class="version">v1.1.0</span>
          </h1>
          <p class="tagline">Professional Vector Racing</p>
        </div>
        
        <div id="gameHUD" class="game-hud">
          <div class="hud-section">
            <div id="playerInfo" class="hud-info"></div>
            <div id="gameStatus" class="hud-status"></div>
          </div>
          <div id="performanceMetrics" class="hud-metrics"></div>
        </div>
        
        <nav class="controls" role="navigation" aria-label="Game controls">
          <button id="configBtn" title="Game Settings" class="btn-config" aria-label="Open game settings">
            <span class="hamburger-icon">
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
            </span>
          </button>
        </nav>
      </header>
      
      <main role="main">
        <section class="game-area">
          <canvas 
            id="canvas" 
            width="1000" 
            height="700" 
            role="application"
            aria-label="vRacer game canvas - use mouse to select moves or keyboard controls"
            tabindex="0"
          ></canvas>
          <div class="game-overlay" id="gameOverlay">
            <!-- Dynamic overlay content will be inserted here -->
          </div>
        </section>
        
        <aside id="sidebar" role="complementary" aria-label="Game information and help">
          <section class="status-section">
            <h2>
              <span class="section-icon">ğŸ“Š</span>
              Game Status
            </h2>
            <div id="status" role="log" aria-live="polite"></div>
          </section>
          
          <section class="help-section">
            <h2>
              <span class="section-icon">â“</span>
              How to Play
            </h2>
            <div class="help-content">
              <div class="help-category">
                <h3>ğŸ¯ Objective</h3>
                <ul>
                  <li>Complete <strong>3 laps</strong> around the track</li>
                  <li>Cross the <strong>checkered finish line</strong> in the correct direction</li>
                  <li>Beat other players in multi-car races!</li>
                </ul>
              </div>
              
              <div class="help-category">
                <h3>ğŸ•¹ï¸ Controls</h3>
                <ul>
                  <li><strong>Mouse:</strong> Click highlighted nodes to move</li>
                  <li><strong>Keyboard:</strong> WASD or arrow keys</li>
                  <li><strong>Diagonals:</strong> Q/E/Z/X keys</li>
                  <li><strong>Coast:</strong> Space or Enter (no acceleration)</li>
                  <li><strong>Undo:</strong> U or Ctrl+Z</li>
                </ul>
              </div>
              
              <div class="help-category">
                <h3>âš¡ Physics</h3>
                <ul>
                  <li>Velocity changes by <strong>-1, 0, or +1</strong> each turn</li>
                  <li>Cars have <strong>momentum</strong> - plan ahead!</li>
                  <li>Stay within track boundaries to avoid crashing</li>
                  <li>Cars can <strong>collide</strong> with each other</li>
                </ul>
              </div>
              
              <div class="help-category">
                <h3>âŒ¨ï¸ Shortcuts</h3>
                <ul>
                  <li><kbd>R</kbd> - Reset game</li>
                  <li><kbd>G</kbd> - Toggle grid</li>
                  <li><kbd>C</kbd> - Toggle move candidates</li>
                  <li><kbd>D</kbd> - Toggle debug info</li>
                  <li><kbd>Esc</kbd> - Close settings dialog</li>
                </ul>
                
                <div class="help-category">
                  <h3>âš™ï¸ Settings</h3>
                  <p>Click the <strong>hamburger menu</strong> (â˜°) in the header to access game settings including reset, display options, and developer tools.</p>
                </div>
              </div>
            </div>
          </section>
          
          <section class="features-section">
            <h2>
              <span class="section-icon">ğŸš€</span>
              Features
            </h2>
            <div class="feature-badges">
              <span class="badge badge-enabled">Multi-Car Racing</span>
              <span class="badge badge-enabled">Car Collisions</span>
              <span class="badge badge-enabled">Advanced Controls</span>
              <span class="badge badge-enabled">Particle Effects</span>
              <span class="badge badge-enabled">Performance Metrics</span>
            </div>
          </section>
        </aside>
      </main>
      
      <footer role="contentinfo">
        <div class="footer-content">
          <div class="footer-info">
            <strong>vRacer v1.1.0</strong> â€¢ 
            <span class="text-accent">Professional Vector Racing Game</span>
          </div>
          <div class="footer-links">
            <span>MIT License</span> â€¢ 
            <a href="https://github.com/brentaenck/vRacer" target="_blank" rel="noopener" class="footer-link">
              View Source
            </a>
          </div>
        </div>
      </footer>
      
      <!-- Configuration Dialog Modal -->
      <div id="configModal" class="modal-overlay" role="dialog" aria-labelledby="config-title" aria-hidden="true">
        <div class="modal-content">
          <header class="modal-header">
            <h2 id="config-title">âš™ï¸ Game Settings</h2>
            <button id="closeConfigBtn" class="btn-close" aria-label="Close settings">
              <span>&times;</span>
            </button>
          </header>
          
          <div class="modal-body">
            <section class="config-section">
              <h3>ğŸ® Game Controls</h3>
              <div class="config-group">
                <button id="resetBtn" title="Reset game (R key)" class="btn-reset btn-full">
                  <span class="btn-icon">ğŸ”„</span>
                  Reset Game
                  <span class="shortcut">R</span>
                </button>
              </div>
            </section>
            
            <section class="config-section">
              <h3>ğŸ‘ï¸ Display Options</h3>
              <div class="config-group">
                <label class="config-toggle">
                  <input id="gridToggle" type="checkbox" checked />
                  <span class="toggle-slider"></span>
                  <div class="toggle-info">
                    <span class="toggle-label">Show Grid</span>
                    <span class="toggle-desc">Display grid lines on the track</span>
                  </div>
                  <span class="shortcut">G</span>
                </label>
                
                <label class="config-toggle">
                  <input id="candToggle" type="checkbox" checked />
                  <span class="toggle-slider"></span>
                  <div class="toggle-info">
                    <span class="toggle-label">Show Moves</span>
                    <span class="toggle-desc">Highlight possible move candidates</span>
                  </div>
                  <span class="shortcut">C</span>
                </label>
              </div>
            </section>
            
            <section class="config-section" id="trackEditorSection" style="display: none;">
              <h3>ğŸ—ï¸ Track Editor</h3>
              <div class="config-group">
                <label class="config-toggle">
                  <input id="editorToggle" type="checkbox" />
                  <span class="toggle-slider"></span>
                  <div class="toggle-info">
                    <span class="toggle-label">Track Editor</span>
                    <span class="toggle-desc">Create and edit custom racing tracks</span>
                  </div>
                  <span class="shortcut">E</span>
                </label>
              </div>
            </section>
            
            <section class="config-section">
              <h3>ğŸ› Developer Options</h3>
              <div class="config-group">
                <label class="config-toggle">
                  <input id="debugToggle" type="checkbox" />
                  <span class="toggle-slider"></span>
                  <div class="toggle-info">
                    <span class="toggle-label">Debug Mode</span>
                    <span class="toggle-desc">Show performance metrics and debug info</span>
                  </div>
                  <span class="shortcut">D</span>
                </label>
              </div>
            </section>
          </div>
          
          <footer class="modal-footer">
            <p class="modal-hint">Press <kbd>Esc</kbd> to close this dialog</p>
          </footer>
        </div>
      </div>
      
      <!-- Track Editor Overlay -->
      <div id="trackEditorPanel" class="editor-panel" style="display: none;" role="dialog" aria-labelledby="editor-title">
        <header class="editor-header">
          <h2 id="editor-title">
            ğŸ—ï¸ Track Editor
            <span id="editorMode" class="editor-mode">Draw Mode</span>
          </h2>
          <button id="closeEditorBtn" class="btn-close" aria-label="Close track editor">
            <span>&times;</span>
          </button>
        </header>
        
        <div class="editor-content">
          <section class="editor-tools">
            <h3>ğŸ”¨ Tools</h3>
            <div class="tool-palette">
              <button class="tool-btn tool-active" data-tool="pen" title="Pen Tool (P)">
                âœï¸ Pen
              </button>
              <button class="tool-btn" data-tool="eraser" title="Eraser Tool (E)">
                ğŸ—‘ï¸ Erase
              </button>
              <button class="tool-btn" data-tool="move" title="Move Tool (M)">
                â†”ï¸ Move
              </button>
              <button class="tool-btn" data-tool="start_finish" title="Start/Finish Line (S)">
                ğŸ Start/Finish
              </button>
            </div>
          </section>
          
          <section class="editor-modes">
            <h3>ğŸ¯ Mode</h3>
            <div class="mode-buttons">
              <button class="mode-btn mode-active" data-mode="draw" title="Draw Mode (1)">
                âœï¸ Draw
              </button>
              <button class="mode-btn" data-mode="edit" title="Edit Mode (2)">
                ğŸ“ Edit
              </button>
              <button class="mode-btn" data-mode="test" title="Test Mode (3)">
                ğŸï¸ Test
              </button>
              <button class="mode-btn" data-mode="validate" title="Validate Mode (4)">
                âœ… Validate
              </button>
            </div>
          </section>
          
          <section class="editor-properties">
            <h3>ğŸ  Track Properties</h3>
            <div class="property-group">
              <label class="property-label">
                Track Name:
                <input id="trackName" type="text" value="New Track" class="property-input" />
              </label>
              <label class="property-label">
                Author:
                <input id="trackAuthor" type="text" value="Anonymous" class="property-input" />
              </label>
              <label class="property-label">
                Difficulty:
                <select id="trackDifficulty" class="property-select">
                  <option value="Easy">Easy</option>
                  <option value="Medium" selected>Medium</option>
                  <option value="Hard">Hard</option>
                  <option value="Expert">Expert</option>
                </select>
              </label>
            </div>
          </section>
          
          <section class="editor-options">
            <h3>âš™ï¸ Options</h3>
            <div class="option-group">
              <label class="option-toggle">
                <input id="snapToGrid" type="checkbox" checked />
                <span class="toggle-slider small"></span>
                <span class="option-label">Snap to Grid</span>
              </label>
              <label class="option-toggle">
                <input id="showValidation" type="checkbox" />
                <span class="toggle-slider small"></span>
                <span class="option-label">Show Validation</span>
              </label>
            </div>
          </section>
          
          <section class="editor-validation" id="validationResults" style="display: none;">
            <h3>âš ï¸ Validation</h3>
            <div id="validationErrors" class="validation-errors"></div>
            <div id="validationWarnings" class="validation-warnings"></div>
            <div id="validationMetrics" class="validation-metrics"></div>
          </section>
          
          <section class="editor-actions">
            <h3>ğŸ’¾ Actions</h3>
            <div class="action-buttons">
              <button id="saveTrackBtn" class="btn-action btn-save" disabled>
                ğŸ’¾ Save Track
              </button>
              <button id="loadTrackBtn" class="btn-action btn-load">
                ğŸ“ Load Track
              </button>
              <button id="exportTrackBtn" class="btn-action btn-export" disabled>
                ğŸ“¤ Export
              </button>
              <button id="clearTrackBtn" class="btn-action btn-clear">
                ğŸ—‘ï¸ Clear
              </button>
            </div>
          </section>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>

